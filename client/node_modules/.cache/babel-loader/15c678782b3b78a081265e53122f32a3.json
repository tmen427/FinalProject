{"ast":null,"code":"import _defineProperty from \"/Users/tmonnie/Desktop/Crowd-Source/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/tmonnie/Desktop/Crowd-Source/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/tmonnie/Desktop/Crowd-Source/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/tmonnie/Desktop/Crowd-Source/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/tmonnie/Desktop/Crowd-Source/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/tmonnie/Desktop/Crowd-Source/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/tmonnie/Desktop/Crowd-Source/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/tmonnie/Desktop/Crowd-Source/client/src/components/Pages/Inputdata.js\";\nimport React, { Component } from \"react\";\nimport Jumbotron from \"../Jumbotron\";\nimport API from \"../../utils/API\";\nimport { Input, TextArea, FormBtn, SelectTag } from \"../Form\";\nimport { Container, Row, Col } from \"../Grid\";\nimport { List, ListItem } from \"../List\";\nimport DeleteBtn from \"../DeleteBtn\";\nimport \"./style.css\";\nimport { Button, Modal } from 'react-bootstrap';\nimport ReactMapboxGl, { Layer, Feature, Marker } from \"react-mapbox-gl\"; // import dotenv from 'dotenv'\n\nvar Map = ReactMapboxGl({\n  accessToken: \"pk.eyJ1IjoiZGF2aWR2bzE5OTAiLCJhIjoiY2p4MmsyOXJsMDAxYTQ4cGg3cHMwcTZkMCJ9.mHHhKy1QIfmGF_TC88vSUg\"\n});\n\nvar Inputdata =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Inputdata, _Component);\n\n  function Inputdata() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Inputdata);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Inputdata)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      locations: [],\n      locationSearch: \"\",\n      name: \"\",\n      message: \"\",\n      feature: \"\",\n      show: false,\n      addressDB: \"\",\n      nameDB: \"\",\n      longitudeDB: \"\",\n      latitudeDB: \"\"\n    };\n    _this.handleShow = _this.handleShow.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleClose = _this.handleClose.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n\n    _this.loadLocation = function () {\n      API.getLocations().then(function (res) {\n        return (// console.log(res.data)\n          _this.setState({\n            locations: res.data,\n            name: \"\",\n            locationSearch: \"\",\n            message: \"\",\n            feature: \"\"\n          })\n        );\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.handleInputChange = function (event) {\n      // Destructure the name and value properties off of event.target\n      // Update the appropriate state\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleFormSubmit = function (event) {\n      // When the form is submitted, prevent its default behavior, get update state\n      event.preventDefault(); //console.log(this.state.feature)\n      //console.log(this.state.name)\n\n      setTimeout(function () {\n        return _this.loadLocation();\n      }, 3000);\n\n      if (_this.state.name && _this.state.locationSearch) {\n        API.searchLocations(_this.state.locationSearch, {\n          name: _this.state.name,\n          message: _this.state.message,\n          feature: _this.state.feature\n        }).then(function (res) {\n          _this.loadLocation();\n        }).catch(function (err) {\n          return console.log(err);\n        });\n      }\n\n      _this.loadLocation();\n    };\n\n    _this.deleteLocation = function (id) {\n      API.deleteLocation(id).then(function (res) {\n        return _this.loadLocation();\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Inputdata, [{\n    key: \"handleClose\",\n    value: function handleClose() {\n      this.setState({\n        show: false\n      });\n    }\n  }, {\n    key: \"handleShow\",\n    value: function handleShow(address, name, longitude, latitude) {\n      this.setState({\n        show: true,\n        addressDB: address,\n        nameDB: name,\n        longitudeDB: longitude,\n        latitudeDB: latitude\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadLocation();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(Jumbotron, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }), React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(Col, {\n        size: \"md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(Input, {\n        name: \"name\",\n        value: this.state.name,\n        onChange: this.handleInputChange,\n        placeholder: \"Name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }), React.createElement(Input, {\n        name: \"locationSearch\",\n        value: this.state.locationSearch,\n        onChange: this.handleInputChange,\n        placeholder: \"Input Location\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }), React.createElement(TextArea, {\n        name: \"message\",\n        value: this.state.message,\n        onChange: this.handleInputChange,\n        placeholder: \"Message\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }), React.createElement(SelectTag, {\n        name: \"feature\",\n        value: this.state.feature,\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }), React.createElement(FormBtn, {\n        disabled: !(this.state.name && this.state.locationSearch),\n        onClick: this.handleFormSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"Submit\"))), React.createElement(Col, {\n        size: \"md-12 sm-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, \"Location Data List\"), this.state.locations.length ? React.createElement(List, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, this.state.locations.map(function (location) {\n        return React.createElement(ListItem, {\n          key: location._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148\n          },\n          __self: this\n        }, React.createElement(DeleteBtn, {\n          onClick: function onClick() {\n            return _this2.deleteLocation(location._id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149\n          },\n          __self: this\n        }), React.createElement(\"h3\", {\n          className: \"showMap\",\n          onClick: function onClick() {\n            return _this2.handleShow(location.address, location.name, location.longitude, location.latitude);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150\n          },\n          __self: this\n        }, location.feature === \"water\" ? \"Water\" : location.feature === \"bathroom\" ? \"Bathroom\" : \"Bicycle Rack\"), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154\n          },\n          __self: this\n        }, React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155\n          },\n          __self: this\n        }, location.address), \" add by \", React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155\n          },\n          __self: this\n        }, location.name))), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }, React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }, \"Longitude:\"), \" \", location.longitude, \", \", React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }, \"Latitude:\"), \" \", location.latitude)), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, \"Message:\"), \" \", location.message)));\n      })) : React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, \"No Results to Display\"))), React.createElement(Modal, {\n        show: this.state.show,\n        onHide: this.handleClose,\n        dialogClassName: \"modal-90w\",\n        \"aria-labelledby\": \"modal-styling-title\",\n        size: \"lg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(Modal.Header, {\n        closeButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(Modal.Title, {\n        id: \"modal-styling-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, this.state.addressDB, \"  \", React.createElement(\"span\", {\n        id: \"notbold\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, \"by  \"), this.state.nameDB)), React.createElement(Modal.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(Map, {\n        style: \"mapbox://styles/mapbox/streets-v11\",\n        zoom: [13],\n        center: [this.state.longitudeDB, this.state.latitudeDB],\n        containerStyle: {\n          width: '100%',\n          height: '500px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(Marker, {\n        coordinates: [this.state.longitudeDB, this.state.latitudeDB],\n        anchor: \"bottom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"./assets/img/marker.png\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      })), React.createElement(Layer, {\n        type: \"symbol\",\n        layout: {\n          \"icon-image\": \"marker-15\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(Feature, {\n        coordinates: [this.state.longitudeDB, this.state.latitudeDB],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      })))), React.createElement(Modal.Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"secondary\",\n        onClick: this.handleClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, \"Close\")))));\n    }\n  }]);\n\n  return Inputdata;\n}(Component);\n\nexport default Inputdata;","map":{"version":3,"sources":["/Users/tmonnie/Desktop/Crowd-Source/client/src/components/Pages/Inputdata.js"],"names":["React","Component","Jumbotron","API","Input","TextArea","FormBtn","SelectTag","Container","Row","Col","List","ListItem","DeleteBtn","Button","Modal","ReactMapboxGl","Layer","Feature","Marker","Map","accessToken","Inputdata","state","locations","locationSearch","name","message","feature","show","addressDB","nameDB","longitudeDB","latitudeDB","handleShow","bind","handleClose","loadLocation","getLocations","then","res","setState","data","catch","err","console","log","handleInputChange","event","target","value","handleFormSubmit","preventDefault","setTimeout","searchLocations","deleteLocation","id","address","longitude","latitude","length","map","location","_id","width","height"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Jumbotron from \"../Jumbotron\";\nimport API from \"../../utils/API\";\nimport { Input, TextArea, FormBtn, SelectTag } from \"../Form\";\nimport { Container, Row, Col } from \"../Grid\";\nimport { List, ListItem } from \"../List\";\nimport DeleteBtn from \"../DeleteBtn\";\nimport \"./style.css\";\nimport { Button, Modal } from 'react-bootstrap';\nimport ReactMapboxGl, { Layer, Feature, Marker } from \"react-mapbox-gl\";\n// import dotenv from 'dotenv'\n\n\n\n\nconst Map = ReactMapboxGl({\n    accessToken: \"pk.eyJ1IjoiZGF2aWR2bzE5OTAiLCJhIjoiY2p4MmsyOXJsMDAxYTQ4cGg3cHMwcTZkMCJ9.mHHhKy1QIfmGF_TC88vSUg\"\n});\n\nclass Inputdata extends Component {\n    state = {\n        locations: [],\n        locationSearch: \"\",\n        name: \"\",\n        message: \"\",\n        feature: \"\",\n        show: false,\n        addressDB: \"\",\n        nameDB: \"\",\n        longitudeDB: \"\",\n        latitudeDB: \"\",\n    };\n\n\n    handleShow = this.handleShow.bind(this);\n    handleClose = this.handleClose.bind(this);\n\n    handleClose() {\n        this.setState({ show: false });\n    }\n\n    handleShow(address, name, longitude, latitude) {\n        this.setState({ show: true, addressDB: address, nameDB: name, longitudeDB: longitude, latitudeDB: latitude });\n    }\n\n\n    componentDidMount() {\n        this.loadLocation();\n    }\n\n    loadLocation = () => {\n        API.getLocations()\n            .then(res =>\n                // console.log(res.data)\n                this.setState({ locations: res.data, name: \"\", locationSearch: \"\", message: \"\", feature: \"\" })\n            )\n            .catch(err => console.log(err));\n    };\n\n    handleInputChange = event => {\n        // Destructure the name and value properties off of event.target\n        // Update the appropriate state\n        const { name, value } = event.target;\n        this.setState({\n            [name]: value\n        });\n    };\n\n    handleFormSubmit = event => {\n        // When the form is submitted, prevent its default behavior, get update state\n        event.preventDefault();\n        //console.log(this.state.feature)\n        //console.log(this.state.name)\n        setTimeout(() =>\n            this.loadLocation()\n            , 3000);\n        if (this.state.name && this.state.locationSearch) {\n            API.searchLocations(\n                this.state.locationSearch, {\n                    name: this.state.name,\n                    message: this.state.message,\n                    feature: this.state.feature\n                })\n                .then(res => {\n                    this.loadLocation();\n                })\n                .catch(err => console.log(err))\n        }\n        this.loadLocation();\n    };\n\n    deleteLocation = id => {\n        API.deleteLocation(id)\n            .then(res => this.loadLocation())\n            .catch(err => console.log(err));\n    };\n\n    render() {\n        return (\n            <div>\n                <Jumbotron />\n                <Container>\n                    <Row>\n                        <Col size=\"md-12\">\n                            <form>\n\n                                <Input\n                                    name=\"name\"\n                                    value={this.state.name}\n                                    onChange={this.handleInputChange}\n                                    placeholder=\"Name\"\n                                />\n                                <Input\n                                    name=\"locationSearch\"\n                                    value={this.state.locationSearch}\n                                    onChange={this.handleInputChange}\n                                    placeholder=\"Input Location\"\n                                />\n                                <TextArea\n                                    name=\"message\"\n                                    value={this.state.message}\n                                    onChange={this.handleInputChange}\n                                    placeholder=\"Message\"\n                                />\n\n                                <SelectTag\n                                    name=\"feature\"\n                                    value={this.state.feature}\n                                    onChange={this.handleInputChange}\n                                />\n\n                                <FormBtn\n                                    disabled={!(this.state.name && this.state.locationSearch)}\n                                    onClick={this.handleFormSubmit}\n                                >\n                                    Submit\n                                </FormBtn>\n\n                            </form>\n                        </Col>\n\n                        <Col size=\"md-12 sm-12\">\n                            <h1>Location Data List</h1>\n                            {this.state.locations.length ? (\n                                <List >\n                                    {this.state.locations.map(location => (\n                                        <ListItem key={location._id}>\n                                            <div>\n                                                <DeleteBtn onClick={() => this.deleteLocation(location._id)} />\n                                                <h3 className=\"showMap\"\n                                                onClick={() => this.handleShow(location.address, location.name, location.longitude, location.latitude)}\n                                                >{location.feature === \"water\" ? \"Water\" : location.feature === \"bathroom\" ? \"Bathroom\" : \"Bicycle Rack\"}</h3>\n                                                <p>\n                                                    <span>\n                                                        <strong>{location.address}</strong> add by <strong>{location.name}</strong>\n                                                    </span>\n                                                </p>\n                                                <p><span><strong>Longitude:</strong> {location.longitude}, <strong>Latitude:</strong> {location.latitude}</span></p>\n                                                <p><strong>Message:</strong> {location.message}</p>\n                                            </div>\n                                        </ListItem>\n\n\n                                    ))}\n                                </List>\n                            ) : (\n                                    <h3>No Results to Display</h3>\n                                )}\n                        </Col>\n                    </Row>\n\n\n                    <Modal\n                        show={this.state.show}\n                        onHide={this.handleClose}\n                        dialogClassName=\"modal-90w\"\n                        aria-labelledby=\"modal-styling-title\"\n                        size=\"lg\"\n                    >\n                        <Modal.Header closeButton>\n                            <Modal.Title id=\"modal-styling-title\">\n                                {this.state.addressDB}  <span id=\"notbold\">by  </span>{this.state.nameDB}\n                            </Modal.Title>\n                        </Modal.Header>\n                        <Modal.Body>\n\n                            \n                            <Map\n                                style=\"mapbox://styles/mapbox/streets-v11\"\n                                zoom={[13]}\n                                center={[this.state.longitudeDB, this.state.latitudeDB]}\n                                containerStyle={{\n                                    width: '100%',\n                                    height: '500px',\n                                }}\n                            >\n                                <Marker\n                                    coordinates={[this.state.longitudeDB, this.state.latitudeDB]}\n                                    anchor=\"bottom\">\n                                    <img src={\"./assets/img/marker.png\"} />\n                                </Marker>\n                                <Layer\n                                    type=\"symbol\"\n                                    layout={{ \"icon-image\": \"marker-15\" }}>\n                                    <Feature\n                                        coordinates={[this.state.longitudeDB, this.state.latitudeDB]}\n                                    />\n                                </Layer>\n                            </Map>\n                            \n\n                        </Modal.Body>\n                        <Modal.Footer>\n                            <Button variant=\"secondary\" onClick={this.handleClose}>\n                                Close\n                                </Button>\n\n                        </Modal.Footer>\n                    </Modal>\n\n                </Container>\n            </div>\n        );\n    }\n}\n\n\nexport default Inputdata;"]},"metadata":{},"sourceType":"module"}